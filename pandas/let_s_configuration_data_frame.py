#
# cd pandas
# python let_s_configuration_data_frame.py
#
# pandas ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’è¨­å®šã—ã‚ˆã†
#
# å‚è€ƒï¼š
# * ğŸ“– [pandasã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æŒ‡å®šã§è¡Œãƒ»åˆ—ã‚’æŠ½å‡º](https://note.nkmk.me/python-pandas-index-row-column/)
#
import traceback
import datetime
import pandas as pd


DATA_CSV_FILE_PATH = '../resources/number_of_shoe_sizes.csv'


########################################
# ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰å®Ÿè¡Œæ™‚
########################################
if __name__ == '__main__':
    try:
        enter_key = input(f"""\
äºˆã‚ã€ãƒ‡ãƒ¼ã‚¿ã‚’CSVå½¢å¼ã§ {DATA_CSV_FILE_PATH} ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚“ã§ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã‚’èª­ã¿è¾¼ã‚“ã§ã¿ã¾ã™ã€‚

ãã‚Œã§ã¯ã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ»ã‚­ãƒ¼ã‚’æ‰“éµã—ã¦ã¿ã¦ãã ã•ã„ã€‚
> """)

        # ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ã€ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ã«ã—ã¦è¿”ã™
        df = pd.read_csv(DATA_CSV_FILE_PATH, encoding="utf8")


        # ãƒ‡ãƒ¼ã‚¿ã‚’ï¼‘è¡Œãšã¤è¦‹ã¦ã„ã
        for         shoe_size,       number in\
            zip(df['shoe_size'], df['number']):
            print(f"[{datetime.datetime.now()}] {shoe_size=}  {number=}")


        enter_key = input(f"""\
shoe_size åˆ—ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ãã‚Œã§ã¯ã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ»ã‚­ãƒ¼ã‚’æ‰“éµã—ã¦ã¿ã¦ãã ã•ã„ã€‚
> """)


        df.set_index(
                ['shoe_size'],
                inplace=True)   # NOTE ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ¼ã‚¹ã‚’çœŸã«ã™ã‚‹ã“ã¨ã§ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¨­å®šã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’æˆ»ã‚Šå€¤ã¨ã—ã¦è¿”ã™ã®ã§ã¯ãªãã€ã“ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ è‡ªèº«ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¨­å®šã—ã¾ã™

        enter_key = input(f"""\
{df}

shoe_size åˆ—ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ã—ã¾ã—ãŸã€‚

ã“ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ï¼‘è¡Œãšã¤èª­ã¿è¾¼ã‚“ã§ã¿ã¾ã™ã€‚
ãã‚Œã§ã¯ã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ»ã‚­ãƒ¼ã‚’æ‰“éµã—ã¦ã¿ã¦ãã ã•ã„ã€‚
> """)

        try:
            # ãƒ‡ãƒ¼ã‚¿ã‚’ï¼‘è¡Œãšã¤è¦‹ã¦ã„ã
            for         shoe_size,       number in\
                zip(df['shoe_size'], df['number']):
                print(f"[{datetime.datetime.now()}] {shoe_size=}  {number=}")
                raise ValueError("ã“ã“ã«ã¯æ¥ã¾ã›ã‚“")

        except KeyError as e:
            print(e)
        

        enter_key = input(f"""\
ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«å¤‰æ›´ã—ãŸåˆ—ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰å‰Šé™¤ã•ã‚Œã€åˆ—åã¨ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã§ããªããªã‚Šã¾ã—ãŸã€‚
åˆ—åã‚’ä½¿ã‚ãšã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ãã‚Œã§ã¯ã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ»ã‚­ãƒ¼ã‚’æ‰“éµã—ã¦ã¿ã¦ãã ã•ã„ã€‚
> """)

        print(f"""\
{df['number'][30]=}
{df['number'][30.5]=}
{df['number'][31]=}
{df['number'][31.5]=}
{df['number'][32]=}
{df['number'][32.5]=}
{df['number'][33]=}
{df['number'][33.5]=}
{df['number'][34]=}
{df['number'][34.5]=}
{df['number'][35]=}
{df['number'][35.5]=}
{df['number'][36]=}
{df['number'][36.5]=}
{df['number'][37]=}
{df['number'][37.5]=}
{df['number'][38]=}
{df['number'][38.5]=}
{df['number'][39]=}
{df['number'][39.5]=}
{df['number'][40]=}
""")

        enter_key = input(f"""\
ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’ä½¿ã£ã¦ã€ãƒ‡ãƒ¼ã‚¿è¡Œã¸ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã—ãŸã€‚

æ¬¡ã«æŒ‡å®šã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
ãã‚Œã§ã¯ã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ»ã‚­ãƒ¼ã‚’æ‰“éµã—ã¦ã¿ã¦ãã ã•ã„ã€‚
> """)

        print(f"""\
{(29.5 in df['number'])=}
{(30 in df['number'])=}
""")

        print("ãŠã‚ã‚Šã€‚")


    except Exception as err:
        print(f"""\
ãŠãŠã€æ®‹å¿µï¼ã€€ä¾‹å¤–ãŒæŠ•ã’ã‚‰ã‚Œã¦ã—ã¾ã£ãŸï¼
{type(err)=}  {err=}

ä»¥ä¸‹ã¯ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹è¡¨ç¤ºã˜ã‚ƒã€‚
{traceback.format_exc()}
""")
